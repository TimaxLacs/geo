# Проект "Гео" — План работ и TODO

## Будущая файловая структура проекта

```
geo/
├── app/
│   ├── page.tsx                # Главная страница (демо, генератор кода, UI)
│   ├── sidebar.ts              # Конфиг сайдбара (логотип, навигация)
├── components/
│   ├── Geo.tsx                 # Универсальный компонент карты
│   ├── GeoMarker.tsx           # Компонент маркера
│   ├── GeoPolygon.tsx          # Компонент полигона
│   ├── GeoRoute.tsx            # Компонент маршрута
│   └── ui/                     # Компоненты интерфейса (shadcn/ui)
├── lib/
│   ├── core/
│   │   ├── GeoProvider.ts      # Базовый класс для провайдеров
│   │   ├── types.ts            # Общие типы
│   │   └── converters.ts       # Конвертеры координат и форматов
│   ├── yandex/
│   │   ├── index.ts            # Класс YandexGeoProvider
│   │   ├── types.ts
│   │   └── tests/
│   ├── google/
│   │   ├── index.ts            # Класс GoogleGeoProvider
│   │   ├── types.ts
│   │   └── tests/
│   ├── twogis/
│   │   ├── index.ts            # Класс TwoGisGeoProvider
│   │   ├── types.ts
│   │   └── tests/
├── public/
│   ├── logo.png                # Логотип проекта
│   └── ...                     # Статические файлы, favicon и т.д.
├── tests/                      # Интеграционные и e2e тесты (если появятся)
├── README.md
├── GEO_PROJECT_PLAN.md         # Этот план
├── package.json
├── tsconfig.json
├── .env.example
└── ... (прочие конфиги, доки, workflows)
```

## Этапы разработки до внедрения маркеров

### 1. Инфраструктура и инициализация
- [x] Инициализировать проект через `npx hasyx init`
- [x] Настроить ассистента через `npx hasyx assist` (пропустить БД, остальные токены заполнить)
- [x] Интегрировать Telegram-бота для автоматической загрузки env в GitHub (опционально)
- [x] Интегрировать ассистента с Vercel для синхронизации переменных окружения
- [x] Переименовать проект с "hasyx" на "гео от тимакса"
- [x] Заменить логотип hasyx на свой (отображение на главной странице, в сайдбаре, README)

### 2. Исследование форматов данных движков
- [ ] Изучить отличия в форматах принимаемых и выдаваемых данных для Яндекс, Google, 2ГИС:
  - [ ] Форматы координат (широта/долгота, порядок, типы)
  - [ ] Форматы центральных точек и геообъектов
  - [ ] Форматы адресов и результатов поиска
  - [ ] Особенности передачи и получения данных (JSON, объекты, массивы, вложенность)
  - [ ] Стандарты для передачи геометок, полигонов, маршрутов
- [ ] Составить сравнительную таблицу форматов для всех движков
- [ ] Описать необходимые преобразования для унификации
- [ ] Подготовить требования к конвертерам данных

### 3. Универсальный компонент "Гео"
- [ ] Создать универсальный компонент `Geo` для отрисовки карт
  - [ ] Принимать строковый проп движка ("яндекс", "гугл", "2гис")
  - [ ] Автоматически отрисовывать нужный движок
  - [ ] Экспортировать компонент для использования в других проектах
- [ ] Реализовать поддержку children (элементы между открывающим и закрывающим тегом)
- [ ] Реализовать пропсы управления: central point, zoom, disablePos, disableZoom

### 4. Поддержка карт (поэтапно)
- [ ] Реализовать поддержку Яндекс.Карт
  - [ ] Класс для работы с API Яндекс.Карт
  - [ ] Компонент для отрисовки карты
  - [ ] API поиска адресов/координат
  - [ ] Управление зумом и позицией
  - [ ] Метод getBounds
- [ ] Реализовать поддержку Google Maps
  - [ ] Класс для работы с API Google Maps
  - [ ] Компонент для отрисовки карты
  - [ ] API поиска адресов/координат
  - [ ] Управление зумом и позицией
  - [ ] Метод getBounds
- [ ] Реализовать поддержку 2ГИС
  - [ ] Класс для работы с API 2ГИС
  - [ ] Компонент для отрисовки карты
  - [ ] API поиска адресов/координат
  - [ ] Управление зумом и позицией
  - [ ] Метод getBounds
- [ ] Управление через JS-интерфейс
- [ ] Указать необходимые env-переменные в README

### 5. Унификация API и конвертеры
- [ ] В папке `lib` создать подпапки: `yandex`, `google`, `2gis`
- [ ] В каждом модуле реализовать:
  - [ ] Класс для работы с API
  - [ ] Функцию поиска по адресу/координатам (унифицированный формат ответа)
  - [ ] Конвертер координат в общий формат
  - [ ] Тесты через jest
- [ ] Реализовать универсальный API для поиска адресов/координат (единый формат ответа)
- [ ] Интерфейс для ввода адреса, выбора движка, мультиселект для поиска и отображения результатов

### 6. Работа с маркерами (до полноценного внедрения)
- [ ] Реализовать универсальный движок отрисовки маркеров
- [ ] Создать компонент `GeoMarker` (используется как children внутри `Geo`)
- [ ] Реализовать провайдер для взаимодействия с движком (добавление/удаление маркеров через единый метод)
- [ ] Поддержать кастомные иконки для маркеров (разобраться с возможностями движков)
- [ ] Собрать информацию о возможностях маркеров в разных движках (размер, кастомизация, события)

--- 